(dp1
S'output'
p2
S''
sS'layer'
p3
S'/home/pratyush/web2py/applications/music_library/models/db.py'
p4
sS'code'
p5
S'if request.env.web2py_runtime_gae:            # if running on Google App Engine\n    db = DAL(\'gae\')                           # connect to Google BigTable\n    session.connect(request, response, db=db) # and store sessions and tickets there\nelse:                                         # else use a normal relational database\n    db = DAL(\'sqlite://storage.sqlite\')       # if not, use SQLite or other DB\nfrom gluon.tools import *\nauth=Auth(globals(),db)                      # authentication/authorization\nauth.settings.hmac_key=\'sha512:40b75704-2d17-4fe6-9e58-2d33a13a5d59\'\nauth.define_tables()                         # creates all needed tables\ncrud=Crud(globals(),db)                      # for CRUD helpers using auth\nservice=Service(globals())                   # for json, xml, jsonrpc, xmlrpc, amfrpc\n\ndb.define_table(\'music\',\n                SQLField(\'name\'),\n                SQLField(\'genre\'),\n\t        SQLField(\'artist\'),\n     \t\tSQLField(\'album\'),\n\t\tSQLField(\'language\'),\n\t\tSQLField(\'rating\',\'integer\'),\n                SQLField(\'song\', \'upload\'))\n\n\n\n""" the above db table is the core of the application developed, only a single table has been used to develop the entire application. Functionalities like- \n\ta)Searching for songs in accordance with above fields \n\tb)Viewing all the songs\n\tc)Adding new songs with the aforesaid mentioned criteria\n\td)deletion of a song \n\te)developing an open source platform for song sharing\n\tf)seperate user id and password for the contributors\n\tg)playing a particular song online\n\th)main page will show latest updates, top-rated songs, recently played, recently added songs\n\ti)providing download to registered and even unregistered users               \n"""\n\n\n\ndb.music.name.requires=IS_NOT_EMPTY()#name of song should not be left empty so that it can be found easily later\ndb.music.song.requires=[IS_NOT_EMPTY(),IS_NOT_IN_DB(db,db.music.song)]#empty uploads disallowed and repeated entries forbidden\ndb.music.genre.requires=IS_IN_SET([\'blues\',\'alternative\',\'jazz\',\'rock\',\'metal\',\'pop\',\'retro\',\'r&b\',\'rap\',\'classical\',\'gazal\',\'ska\',\'punk\',\'hip-hop\',\'hardcore\',\'gothic\',\'sufi\',\'opera\',\'techno\',\'folk\',\'other\'])#genre should be an entity of the set given alongside\ndb.music.album.requires=IS_NOT_EMPTY()#album field shouldnt be left although multiple songs can be of the same album\ndb.music.rating.requires = IS_IN_SET(range(0,6))#rating by the user on a scale of 0-5\ndb.music.language.requires=IS_IN_SET([\'english\',\'hindi\',\'telugu\',\'tamil\',\'bengali\',\'malayalam\',\'spanish\',\'italian\',\'russian\',\'swiss\',\'mandarin\',\'japanese\',\'african\',\'korean\',\'arabic\',\'other european\',\'other asian\',\'latin american\',\'other\'])#music language is required for the convenience users listening to particular language, it wud be an entity of set given alongside\ndb.music.artist.requires=IS_NOT_EMPTY()#artist field shouldnt be left empty\n\n\nimport datetime\n\n\ndb.define_table(\'comment\',\n                SQLField(\'comment\',\'text\', requires=IS_NOT_EMPTY()),\n                SQLField(\'user\' , db.auth_user , default=auth.user_id, writable=False), requires= IS_IN_DB(db,db.auth_user.id)),\n\t        SQLField(\'music\', db.music, requires=IS_IN_DB(db,db.music.id, \'%(name)s\')))\n\n\n\n\n\n\n'
p6
sS'traceback'
p7
S'Traceback (most recent call last):\n  File "/home/pratyush/web2py/gluon/restricted.py", line 171, in restricted\n    ccode = compile(code.replace(\'\\r\\n\', \'\\n\'), layer, \'exec\')\n  File "/home/pratyush/web2py/applications/music_library/models/db.py", line 53\n    SQLField(\'music\', db.music, requires=IS_IN_DB(db,db.music.id, \'%(name)s\')))\n   ^\nIndentationError: unexpected indent\n'
p8
s.